#### 流程中包括：

系统1前台、后台

系统2前台、后台

单点登录（sso）前台、后台



#### 登陆流程

> 系统1登陆

1. 系统1前台在cookie中获取token（cookie中没有token）
2. 系统1前台跳转sso前台（携带系统1的回调地址和跳转前的页面地址）
3. sso前台在cookie中获取token（cookie中没有token），要求用户输入用户名密码登陆
4. sso前台向后台发送请求（携带用户名、密码、系统1的回调地址）
5. sso后台用户信息校验成功，生成token，向系统1后台发送请求（携带token），向sso前台返回token

##### 在第五步后会分为两部分

系统1后台执行操作：

		1. 系统1后台收到请求，向sso后台发送校验请求（携带token，系统1的回调地址）
  		2. sso后台收到请求，验证token成功，给系统1后台返回校验成功状态
  		3. 系统1后台记录token有效

sso前台执行操作：

1. sso前台收到token，设置到sso系统cookie中，跳转回系统1页面（携带token）
2. 系统1前台设置token，向系统1后台发送请求（携带cookie，cookie中携带有效token）
3. 系统1后台收到请求，校验token有效，向系统1前台返回资源



> 系统2 在系统1登陆后 的 登陆流程

1. 系统2前台在cookie中获取token（cookie中没有token）
2. 系统2前台跳转sso前台（携带系统2的回调地址和跳转前的页面地址）
3. sso前台在cookie中获取token（cookie中有token），向后台发送校验请求（携带cookie、系统2的回调地址，cookie中携带有效token）
4. sso后台收到请求，判断该token有效，向系统2后台发送请求（携带token），向sso前台返回已登录状态

##### 第四步后分为两部分

系统2后台执行操作：

1. 系统2后台收到请求，向sso后台发送校验请求（携带token，系统2的回调地址）
2. sso后台收到请求，验证token成功，给系统2后台返回校验成功状态
3. 系统2后台记录token有效

sso前台执行操作：

1. sso前台收到已登录状态，跳转回系统2前台（携带token）
2. 系统2前台设置token，向系统2后台发送请求（携带cookie，cookie中携带token）
3. 系统2后台收到请求，校验token有效，向系统2前台返回资源